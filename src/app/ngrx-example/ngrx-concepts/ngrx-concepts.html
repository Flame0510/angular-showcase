<div class="intro-section">
  <h2>ğŸ¯ Cos'Ã¨ NgRx?</h2>
  <p>
    NgRx Ã¨ una libreria per la gestione dello stato in Angular basata sul
    pattern Redux. Fornisce un modo prevedibile di gestire lo stato
    dell'applicazione attraverso un flusso unidirezionale di dati.
  </p>

  <div class="architecture-diagram">
    <div class="flow-step">
      <div class="flow-box component">Component</div>
      <div class="flow-arrow">dispatch</div>
      <div class="flow-box action">Action</div>
    </div>
    <div class="flow-step">
      <div class="flow-arrow">â†’</div>
      <div class="flow-box reducer">Reducer</div>
      <div class="flow-arrow">â†’</div>
      <div class="flow-box store">Store</div>
    </div>
    <div class="flow-step">
      <div class="flow-arrow">select</div>
      <div class="flow-box selector">Selector</div>
      <div class="flow-arrow">subscribe</div>
    </div>
  </div>
</div>

<div class="concepts-grid">
  <div class="concept-card">
    <div class="concept-header">
      <span class="concept-icon">ğŸª</span>
      <h3>Store</h3>
    </div>
    <p class="concept-description">
      Il contenitore centrale che mantiene l'intero stato dell'applicazione.
      Ãˆ l'unica fonte di veritÃ  (single source of truth).
    </p>
    <app-code-block [code]="storeCode" language="typescript" />
    <div class="key-points">
      <h4>Caratteristiche:</h4>
      <ul>
        <li>âœ“ Immutabile</li>
        <li>âœ“ Prevedibile</li>
        <li>âœ“ Centralizzato</li>
        <li>âœ“ Serializzabile</li>
      </ul>
    </div>
  </div>

  <div class="concept-card">
    <div class="concept-header">
      <span class="concept-icon">âš¡</span>
      <h3>Actions</h3>
    </div>
    <p class="concept-description">
      Eventi che descrivono qualcosa che Ã¨ successo nell'applicazione. Sono
      gli unici modi per inviare dati allo store.
    </p>
    <app-code-block [code]="actionsCode" language="typescript" />
    <div class="key-points">
      <h4>Best Practices:</h4>
      <ul>
        <li>âœ“ Usa nomi descrittivi</li>
        <li>âœ“ Includi la sorgente [Source]</li>
        <li>âœ“ Passa dati via props</li>
        <li>âœ“ Mantienile semplici</li>
      </ul>
    </div>
  </div>

  <div class="concept-card">
    <div class="concept-header">
      <span class="concept-icon">âš™ï¸</span>
      <h3>Reducers</h3>
    </div>
    <p class="concept-description">
      Funzioni pure che prendono lo stato corrente e un'action, e ritornano
      un nuovo stato. Sono responsabili della gestione delle transizioni di
      stato.
    </p>
    <app-code-block [code]="reducerCode" language="typescript" />
    <div class="key-points">
      <h4>Regole:</h4>
      <ul>
        <li>âœ“ Funzioni pure</li>
        <li>âœ“ No side effects</li>
        <li>âœ“ No mutazioni dirette</li>
        <li>âœ“ Ritornano nuovo stato</li>
      </ul>
    </div>
  </div>

  <div class="concept-card">
    <div class="concept-header">
      <span class="concept-icon">ğŸ”</span>
      <h3>Selectors</h3>
    </div>
    <p class="concept-description">
      Funzioni pure per selezionare e derivare dati dallo store. Sono
      memoizzati per performance ottimali.
    </p>
    <app-code-block [code]="selectorsCode" language="typescript" />
    <div class="key-points">
      <h4>Vantaggi:</h4>
      <ul>
        <li>âœ“ Memoizzazione</li>
        <li>âœ“ Riutilizzabili</li>
        <li>âœ“ Composizione</li>
        <li>âœ“ Testabili</li>
      </ul>
    </div>
  </div>

  <div class="concept-card">
    <div class="concept-header">
      <span class="concept-icon">ğŸŒŠ</span>
      <h3>Effects</h3>
    </div>
    <p class="concept-description">
      Gestiscono side effects come chiamate HTTP, routing, storage, ecc.
      Ascoltano actions e possono emettere nuove actions.
    </p>
    <app-code-block [code]="effectsCode" language="typescript" />
    <div class="key-points">
      <h4>Casi d'uso:</h4>
      <ul>
        <li>âœ“ API calls</li>
        <li>âœ“ WebSocket</li>
        <li>âœ“ LocalStorage</li>
        <li>âœ“ Routing</li>
      </ul>
    </div>
  </div>

  <div class="concept-card">
    <div class="concept-header">
      <span class="concept-icon">ğŸ§©</span>
      <h3>Component Integration</h3>
    </div>
    <p class="concept-description">
      Come integrare NgRx nei componenti Angular usando Store injection e
      selectors.
    </p>
    <app-code-block [code]="componentCode" language="typescript" />
    <div class="key-points">
      <h4>Pattern:</h4>
      <ul>
        <li>âœ“ Inject Store</li>
        <li>âœ“ Use selectors</li>
        <li>âœ“ Dispatch actions</li>
        <li>âœ“ Async pipe</li>
      </ul>
    </div>
  </div>
</div>

<div class="setup-section">
  <h2>ğŸš€ Setup & Installation</h2>
  <div class="setup-grid">
    <div class="setup-step">
      <h3>1. Installazione</h3>
      <app-code-block
        [code]="'ng add @ngrx/store\nng add @ngrx/effects\nng add @ngrx/store-devtools'"
        language="typescript"
      />
    </div>
    <div class="setup-step">
      <h3>2. Configurazione</h3>
      <app-code-block [code]="setupCode" language="typescript" />
    </div>
  </div>
</div>

<div class="best-practices">
  <h2>ğŸ’¡ Best Practices</h2>
  <div class="practices-grid">
    <div class="practice">
      <h4>ğŸ“ Struttura File</h4>
      <ul>
        <li>Organizza per feature</li>
        <li>Mantieni file piccoli</li>
        <li>Usa naming conventions</li>
        <li>Separa concerns</li>
      </ul>
    </div>
    <div class="practice">
      <h4>ğŸ”’ ImmutabilitÃ </h4>
      <ul>
        <li>Usa spread operator</li>
        <li>Non mutare lo state</li>
        <li>Usa immer se necessario</li>
        <li>Freeze state in dev</li>
      </ul>
    </div>
    <div class="practice">
      <h4>ğŸ¯ Performance</h4>
      <ul>
        <li>Usa selectors memoizzati</li>
        <li>Normalizza lo state</li>
        <li>OnPush change detection</li>
        <li>Evita logica nei reducer</li>
      </ul>
    </div>
    <div class="practice">
      <h4>ğŸ§ª Testing</h4>
      <ul>
        <li>Testa reducers isolati</li>
        <li>Mock effects</li>
        <li>Test selectors</li>
        <li>Integration tests</li>
      </ul>
    </div>
  </div>
</div>
